"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1732],{8290:function(e,t,a){var r=a(57437),s=a(27648),n=a(99376);t.Z=e=>{let{children:t,href:a,disableMouseEnterPrefetch:l=!1,onClick:i,onMouseEnter:o,...c}=e,u=(0,n.useRouter)();return(0,r.jsx)(s.default,{...c,href:a,prefetch:!1,onMouseEnter:e=>{o&&o(e),!l&&a&&"#"!==a&&u.prefetch(a)},onClick:e=>{i&&i(e)},children:t})}},92499:function(e,t,a){function r(e,t,a,r){return"CM02"===e&&t?t:"/fo/product/productListPage.do?displayCategorySeq=".concat(a)}function s(e,t){function a(e){return{title:e.categoryName,href:r(e.categoryTypeCd,e.directUrl||"",e.displayCategorySeq,t),displayCategorySeq:e.displayCategorySeq,categoryTypeCd:e.categoryTypeCd,subItems:e.children&&e.children.length>0?e.children.map(a):void 0}}return(function(e){let t=new Map,a=[];return e.forEach(e=>{t.set(e.displayCategorySeq,{...e,children:[]})}),t.forEach(e=>{if(null==e.parentDisplayCategorySeq||void 0===e.parentDisplayCategorySeq)a.push(e);else{let a=t.get(e.parentDisplayCategorySeq);a&&a.children.push(e)}}),a})(e).map(function(e){return{title:e.categoryName,iconSrc:"desktop"===t?e.categoryPcImagePath1:e.categoryMobileImagePath1,href:r(e.categoryTypeCd,e.directUrl||"",e.displayCategorySeq,t),displayCategorySeq:e.displayCategorySeq,categoryTypeCd:e.categoryTypeCd,subItems:(e.children||[]).map(a)}})}a.d(t,{T:function(){return s}})},71732:function(e,t,a){a.d(t,{Z:function(){return U}});var r=a(57437),s=a(99376),n=a(2265),l=a(59655),i=a(28260),o=a(23112),c=a(75388),u=a(95459);let d=[{icon:{n:"MoNavHome",w:24,h:24,f:"#000"},txt:"홈"},{icon:{n:"MoNavSearch",w:24,h:24,f:"#000"},txt:"검색"},{icon:{n:"MoNavCategory",w:24,h:24,f:"#000"},txt:"카테고리"},{icon:{n:"MoNavTruck",w:24,h:24,f:"#000"},txt:"주문배송"},{icon:{n:"MoNavMy",w:24,h:24,f:"#000"},txt:"MY"},{icon:{n:"Person",w:24,h:24,f:"#000"},txt:"가입/로그인"}];var h=a(7882),m=a.n(h),g=a(33145),x=a(27648);a(7354),a(76889);var p=a(19764),y=a(59189),f=a(56006),_=a(8290),v=a(61305),w=a(92499),b=a(36186),S=a(96800),j=a(65355),C=a(2983);let N=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:44;try{let a=document.querySelector(e);if(!a)return t;let r=getComputedStyle(a).height;if(!r)return t;let s=parseFloat(r);return isNaN(s)?t:s}catch(e){return console.warn("Failed to get element height:",e),t}};var E=a(2641),I=a(22507),k=a(7584),B=e=>{let{deviceType:t,wrapperStyle:a,setIsCategory:u,isCategory:d,setCategoryState:h,setCategoryActive:B}=e,T=(0,s.useRouter)(),L=(0,b.N)(),[Z,O]=(0,n.useState)(0),[V,M]=(0,n.useState)(-1),{syncCartCount:q}=(0,I.iW)(),[D,W]=(0,n.useState)(0),[P,R]=(0,n.useState)(!1),A=(0,n.useRef)(null),Q=(0,c.B_)(e=>e.authSlice.isLogin),F=(0,c.B_)(e=>e.cartSlice.cartCount),[H,z]=(0,n.useState)(null),U=(0,n.useRef)(null),K=(0,n.useRef)(null),X=(0,n.useRef)(null),G="tablet"===t||"mobile"===t,J=(0,c.B_)(e=>e.authSlice.memberInfo),Y=(0,c.B_)(e=>{var t;return null===(t=e.mainCategoryList.data)||void 0===t?void 0:t.items}),$=(0,c.B_)(e=>e.authSlice.userData),{moveCartPage:ee}=(0,o.ZP)();(0,n.useEffect)(()=>{Q&&q()},[Q,q]),(0,n.useEffect)(()=>{fetch("".concat("https://static-cdn.meatbox.co.kr/public/fstatic","/image/@temp/meatmart.json")).then(e=>e.json()).then(e=>z(e)).catch(e=>console.error("Lottie animation load error:",e))},[]);let et=(0,n.useCallback)((e,t)=>{let a=null,r=0;return function(){for(var s=arguments.length,n=Array(s),l=0;l<s;l++)n[l]=arguments[l];let i=Date.now();i-r>t?(e(...n),r=i):(a&&clearTimeout(a),a=setTimeout(()=>{e(...n),r=Date.now()},t-(i-r)))}},[]),ea=(0,n.useCallback)(e=>{let t=K.current;if(t)try{let a=t.querySelector("li:nth-child(".concat(e+1,")"));if(a){let e=t.getBoundingClientRect(),r=a.getBoundingClientRect();(r.top<e.top||r.bottom>e.bottom)&&(j.ZP.getOs()===S.Qj.OS.WEBVIEW_IOS?(a.scrollIntoView({behavior:"auto",block:"center",inline:"nearest"}),setTimeout(()=>{let e=new TouchEvent("touchstart",{bubbles:!0,cancelable:!0,touches:[]});t.dispatchEvent(e)},100)):a.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))}}catch(e){console.warn("Error scrolling to active depth1 item:",e)}},[]);(0,n.useEffect)(()=>{let e=U.current;if(!e)return;let t=j.ZP.getOs(),a=et(()=>{if(P)return;let a=Array.from(e.querySelectorAll("[data-category-index]")),r=0;a.forEach(t=>{let a=t.getBoundingClientRect(),s=e.getBoundingClientRect(),n=parseInt(t.getAttribute("data-category-index")||"0");a.top<=s.top+10&&(r=n)}),r!==Z&&(O(r),M(-1),t!==S.Qj.OS.WEBVIEW_IOS&&ea(r))},100);return e.addEventListener("scroll",a,{passive:!0}),()=>{e.removeEventListener("scroll",a)}},[Z,P,et,ea]);let er=(0,n.useCallback)(e=>{var t;O(e),M(-1);let a=j.ZP.getOs();a===S.Qj.OS.WEBVIEW_IOS&&(A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{R(!1)},1e3));let r=null===(t=U.current)||void 0===t?void 0:t.querySelector('[data-category-index="'.concat(e,'"]'));r&&(a===S.Qj.OS.WEBVIEW_IOS?(r.scrollIntoView({behavior:"auto",block:"start"}),setTimeout(()=>{let e=U.current;if(e){let t=new TouchEvent("touchstart",{bubbles:!0,cancelable:!0,touches:[]});e.dispatchEvent(t)}},100)):r.scrollIntoView({behavior:"auto",block:"start"})),a!==S.Qj.OS.WEBVIEW_IOS&&setTimeout(()=>{ea(e)},10)},[ea]),es=(0,n.useMemo)(()=>(null==$?void 0:$.role)==="B002"?"B":(null==$||$.role,"S"),[null==$?void 0:$.role]),en=(0,n.useMemo)(()=>Y?(0,w.T)(Y,t):[],[Y,t,es]);(0,n.useEffect)(()=>{if(!d)try{let e=sessionStorage.getItem("categoryCloseReason");"user"===e&&(O(0),M(-1),R(!1),A.current&&clearTimeout(A.current),U.current&&(U.current.scrollTop=0),K.current&&(K.current.scrollTop=0)),sessionStorage.removeItem("categoryCloseReason")}catch(e){}},[d]),(0,n.useEffect)(()=>()=>{A.current&&clearTimeout(A.current)},[]);let el=(0,n.useMemo)(()=>en.map((e,t)=>({categoryIndex:t,categoryTitle:e.title,categoryIconSrc:e.iconSrc,subItems:e.subItems||[]})),[en]);(0,n.useEffect)(()=>{let e=()=>{try{var e;let t=X.current,a=K.current,r=U.current;if(!t||!a||!r)return;let s=j.ZP.getOs(),n=window.innerHeight;if(s===S.Qj.OS.WEBVIEW_IOS){if(window.visualViewport)n=window.visualViewport.height;else{let e=.01*window.innerHeight;n=100*e}}let l=document.querySelector(".mo-category-nav-header"),i=document.querySelector(".quick-menu"),o=document.getElementById("header");o&&!o.hidden&&o.clientHeight,null==l||l.clientHeight,null==i||i.clientHeight;let c=t.clientHeight||t.offsetHeight,u=c;if(s===S.Qj.OS.WEBVIEW_IOS&&(c<=0||c>n)){window.visualViewport&&(n=window.visualViewport.height),u=n-205;let e=Math.min(300,.4*n),t=n-100;u=Math.max(e,Math.min(t,u))}a.style.height="".concat(u,"px"),a.style.overflowY="auto",a.style.overflowX="hidden",r.style.height="".concat(u,"px");let d=(null===(e=el[el.length-1])||void 0===e?void 0:e.subItems.length)+1,h=N(".m_menu_item",44),m=u-d*h;W(Math.max(0,m))}catch(e){console.warn("Error calculating layout:",e)}},t=()=>{j.ZP.getOs()===S.Qj.OS.WEBVIEW_IOS?setTimeout(e,150):requestAnimationFrame(e)};j.ZP.getOs()===S.Qj.OS.WEBVIEW_IOS?setTimeout(e,100):e(),window.addEventListener("resize",t,{passive:!0}),window.addEventListener("orientationchange",t,{passive:!0});let a=j.ZP.getOs();a===S.Qj.OS.WEBVIEW_IOS&&window.visualViewport&&(window.visualViewport.addEventListener("resize",t,{passive:!0}),window.visualViewport.addEventListener("scroll",t,{passive:!0}));let r=new MutationObserver(e=>{let a=!1;e.forEach(e=>{if("attributes"===e.type&&("hidden"===e.attributeName||"style"===e.attributeName)){let t=e.target;("header"===t.id||t.classList.contains("mo-category-nav-header"))&&(a=!0)}}),a&&t()}),s=document.getElementById("header"),n=document.querySelector(".mo-category-nav-header");return s&&r.observe(s,{attributes:!0,attributeFilter:["hidden","style"]}),n&&r.observe(n,{attributes:!0,attributeFilter:["hidden","style"]}),()=>{window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t),a===S.Qj.OS.WEBVIEW_IOS&&window.visualViewport&&(window.visualViewport.removeEventListener("resize",t),window.visualViewport.removeEventListener("scroll",t)),r.disconnect()}},[el]),(0,n.useMemo)(()=>{var e;let t=U.current,a=t?t.clientHeight:0;if(0!==a)W(Math.max(0,a-((null===(e=el[el.length-1])||void 0===e?void 0:e.subItems.length)+1)*N(".m_menu_item",44)))},[el]);let ei=(0,n.useCallback)((e,t)=>{M(t);let a=e.subItems&&e.subItems.length>0?e.subItems[0].href:e.href;a&&"#"!==a&&((0,E.vf)(a,C.i.CARCASS_PRODUCTLIST_PAGE_DO)?i.Z.go(a):T.push(a),u(!1),h(!1),B(!1))},[T,u,h,B]);return(0,r.jsxs)("div",{className:"cate_type1 mo-category-menu ".concat(null!=a?a:""),children:[(0,r.jsx)("header",{className:"mo-category-nav-header",children:(0,r.jsxs)("section",{className:"nav-header-inner",children:[(0,r.jsx)("h4",{children:"카테고리"}),(0,r.jsx)(f.Z,{icon:{name:"Cart",w:24,h:24,f:"#232221"},text:"장바구니버튼",textStyle:"sr-only",style:"button-mo-nav-button",domBox:F&&F>0?(0,r.jsx)(y.Z,{items:{type:"count",value:F}}):null,handleClick:e=>{e.preventDefault(),ee()}})]})}),(0,r.jsx)("section",{className:"quick-menu",children:(0,r.jsx)(v.Z,{perView:5.5,space:8,isObserver:!0,gridType:"mobile_quick",slides:(0,k.zJ)(t,J,$,L.display.isSmall,!0).map((e,t)=>(0,r.jsx)(p.o5,{children:(0,r.jsxs)(x.default,{href:"#",className:"item_quick_menu",onClick:t=>{t.preventDefault(),(null==e?void 0:e.url)&&(i.Z.go(null==e?void 0:e.url),u(!1))},children:[(0,r.jsx)("span",{className:"quick_menu_img",children:e.isLottie&&H?(0,r.jsx)(m(),{animationData:H,loop:!0,autoplay:!0,style:{width:G?32:e.icon.w,height:G?32:e.icon.h}}):(0,r.jsx)(g.default,{src:e.image,alt:e.alt,width:G?48:e.icon.w,height:G?48:e.icon.h})}),(0,r.jsx)("span",{className:"txt_box",children:e.title})]})},t)),noBtn:!0})}),(0,r.jsxs)("div",{className:"category_menu_layer",ref:X,children:[(0,r.jsx)("ul",{className:"depth1_list",ref:K,role:"listbox","aria-label":"1뎁스 카테고리 목록",children:en.map((e,t)=>(0,r.jsx)("li",{className:"menu_box",children:(0,r.jsx)(l.Z,{text:e.title,style:"m_menu_item".concat(Z===t?" active":""),handleClick:()=>{A.current&&clearTimeout(A.current),R(!0),O(t),M(-1),er(t),A.current=setTimeout(()=>{R(!1)},800)},isNextArrow:!1,categoryImgSrc:{name:(null==e?void 0:e.iconSrc)||"",w:20,h:20}})},"".concat(e.title,"-").concat(t)))}),(0,r.jsx)("div",{className:"depth2_list",ref:U,role:"listbox","aria-label":"2뎁스 카테고리 목록",children:el.map((e,t)=>e.subItems.length>0&&(0,r.jsxs)("dl",{className:"depth_box","data-category-index":t,children:[(0,r.jsx)("dt",{children:(0,r.jsx)(l.Z,{categoryImgSrc:{name:e.categoryIconSrc||"",w:20,h:20},text:e.categoryTitle,style:"right-depth1 ".concat(Z===t?" active":"")})}),(0,r.jsx)("dd",{children:(0,r.jsxs)("ul",{className:"depth2-item-list",children:[e.subItems.map((e,a)=>(0,r.jsx)("li",{children:(0,r.jsx)(_.Z,{disableMouseEnterPrefetch:!0,href:e.href||"#",className:"m_menu_item ".concat(V===a&&Z===t?" active":""),onClick:r=>{r.preventDefault(),O(t),M(a),ei(e,a)},children:(0,r.jsx)("span",{className:"txt_box",children:e.title})})},"".concat(e.title,"-").concat(a))),t===el.length-1&&(0,r.jsx)("div",{style:{height:"".concat(D,"px")}})]})})]},"category-".concat(t)))})]})]})},T=a(16727),L=a(12383),Z=a(90858);a(77948);var O=a(60016),V=a(75063),M=a(87404),q=a(58987),D=a(74163),W=a(42247),P=a(4991),R=a(46388),A=a(79753),Q=e=>{var t,a,l;let{goSearch:i,setIsFocused:o,searchValue:d,abortControllerRef:h,setIsSearch:m}=e,g=(0,s.useRouter)(),{setSearchState:y,setSearchActive:_}=(0,u.w)(),[v,w]=(0,n.useState)(!1),b=(0,c.B_)(e=>e.authSlice.isLogin);(0,c.B_)(e=>e.uiSlice.deviceType);let S=(0,c.Xt)(),j=(0,c.B_)(e=>e.searchWordList)||{},C=(null==j?void 0:null===(t=j.data)||void 0===t?void 0:t.searchWordList)||[],N=(0,c.B_)(e=>e.recommandKeyWordList)||{},E=(null==N?void 0:null===(a=N.data)||void 0===a?void 0:a.items)||[],I=(0,c.B_)(e=>e.displayTitleList)||{},k=(null==I?void 0:null===(l=I.data)||void 0===l?void 0:l.events)||[],B=(0,c.B_)(e=>e.recommendList),T=(Array.isArray(null==B?void 0:B.data)?B.data:[]).find(e=>"other-brand"===e.originIndex),L=(null==T?void 0:T.items.map(e=>({...e,showCartButton:!1})))||[];(0,n.useEffect)(()=>{h.current&&h.current.abort(),h.current=new AbortController;let e=h.current.signal;try{S((0,P.sM)({signal:e})),S((0,P.rB)({signal:e})),S((0,D.$)({signal:e}));let t=[{index:"other-brand",size:10,signal:e}];S((0,R.aQ)(t))}catch(e){console.error("최근 검색어 목록 가져오기 실패:",e)}return()=>{h.current&&h.current.abort()}},[S]);let Z=e=>{y(!1),_(!1),m&&m(!1),g.push(e)},Q=async(e,t)=>{e.preventDefault(),h.current=new AbortController;let a=h.current.signal;try{t?await S((0,W.Zh)({all:!1,searchText:t}),{signal:a}):await S((0,W.Zh)({all:!0}),{signal:a}),S((0,P.sM)({signal:a}))}catch(e){console.error(e)}},F=v?C:C.slice(0,3);return(0,r.jsxs)(r.Fragment,{children:[F.length>0&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("section",{className:"inner_box recent_search_area",children:[(0,r.jsxs)("strong",{className:"box_tit",children:[(0,r.jsx)("span",{className:"tit_box",children:"최근 검색어"}),(0,r.jsx)(f.Z,{outLineStyle:"button_init_keyword px_4",text:"전체삭제",textStyle:"txt_box",handleClick:e=>Q(e)})]}),(0,r.jsx)("ul",{className:"recent_search_list",children:F.map(e=>(0,r.jsxs)("li",{children:[(0,r.jsxs)(x.default,{href:"#",className:"recent_list_item pr_24",onClick:t=>{t.preventDefault(),i?i(t,e.searchText):q.P4.go("/",b)},children:[(0,r.jsx)(O.Z,{name:"Search",width:12,height:12,fill:"#858B94",className:"recent_list_search_icon"}),(0,r.jsx)("span",{className:"recent_keyword_txt",children:e.searchText}),(0,r.jsx)("time",{dateTime:(0,V.pz)(e.regdate),className:"txt_date",children:(0,V.uc)(e.regdate)})]}),(0,r.jsx)(f.Z,{outLineStyle:"p_right_center",style:"remove-item",text:"삭제",textStyle:"sr-only",icon:{name:"Close",w:16,h:16,f:"#BABEC4"},handleClick:t=>Q(t,e.searchText)})]},e.searchText))}),C.length>=4&&(0,r.jsx)("div",{className:"recent_search_more",children:(0,r.jsx)(f.Z,{text:v?"최근 검색어 접기":"최근 검색어 더보기",textStyle:"txt_box",style:"flex_reverse gap_4 px_24 w_full",outLineStyle:"py_16 text_center",domBox:(0,r.jsx)(O.Z,{name:"ChevronDown",width:16,height:16,fill:"#858B94",className:v?"rotate_180":"rotate_0"}),handleClick:()=>{w(!v)}})})]})}),E.length>0&&(0,r.jsxs)("section",{className:"inner_box suggestion_keyword_area",children:[(0,r.jsx)("strong",{className:"box_tit",children:(0,r.jsx)("span",{className:"tit_box",children:"추천 검색어"})}),(0,r.jsx)("div",{className:"suggested_keyword_list mt_16",children:E.map((e,t)=>(0,r.jsx)(x.default,{href:"#",className:"suggested_keyword_item",onClick:t=>{t.preventDefault(),i&&i(t,e)},children:(0,r.jsx)("span",{className:"txt_box",children:e})},"".concat(t)))})]}),k.length>0&&(0,r.jsxs)("section",{className:"inner_box suggestion_keyword_area",children:[(0,r.jsx)("strong",{className:"box_tit",children:(0,r.jsx)("span",{className:"tit_box",children:"기획전"})}),(0,r.jsx)("div",{className:"suggested_keyword_list mt_8",children:(0,r.jsx)(A.Z,{perView:"auto",space:8,isObserver:!0,slides:k.map((e,t)=>(0,r.jsx)(p.o5,{children:(0,r.jsx)(f.Z,{outLineStyle:"w_fit",style:"promotion_slide_item",text:e.searchDisplayTitle,textStyle:"txt_box",handleClick:()=>{Z(e.linkUrl)}})},t)),noBtn:!1})})]}),L.length>0&&(0,r.jsxs)("section",{className:"inner_box recommend_product_area mt_24",children:[(0,r.jsx)("strong",{className:"box_tit",children:(0,r.jsx)("span",{className:"tit_box",children:"추천상품"})}),(0,r.jsx)("div",{className:"recommend_product_box mt_8",children:(0,r.jsx)(A.Z,{slides:L.map((e,t)=>(0,r.jsx)(p.o5,{children:(0,r.jsx)("article",{className:"",children:(0,r.jsx)(M.Z,{apiData:e},e.productSeq||t)})},t)),noBtn:!1,arrowPosition:"in_search_modal",perView:2.4})})]})]})},F=a(70635),H=e=>{let{searchValue:t,setIsFocused:a,goSearch:l,abortControllerRef:i,setIsSearch:o}=e,d=(0,s.useRouter)(),h=(0,F.Hx)(),m=(0,c.B_)(e=>e.authSlice.userData),{setSearchState:g,setSearchActive:p}=(0,u.w)(),[y,f]=(0,n.useState)([]),[_,v]=(0,n.useState)([]),[w,b]=(0,n.useState)(t),[S,j]=(0,n.useState)(!1),C=(0,n.useMemo)(()=>(null==m?void 0:m.role)==="B002"?"B":(null==m||m.role,"S"),[null==m?void 0:m.role]);(0,n.useEffect)(()=>{let e=setTimeout(()=>{b(t)},300);return()=>clearTimeout(e)},[t]),(0,n.useEffect)(()=>{if(!w){f([]),v([]),j(!1);return}(async()=>{j(!0);try{var e,t,a;i.current&&i.current.abort(),i.current=new AbortController;let r=await h.get("".concat("https://mb-api.meatbox.co.kr","/product/api/v1/search/autoComplete"),{params:{keyword:w},signal:i.current.signal});(null===(e=r.data.data)||void 0===e?void 0:e.autoCompleteCategory.items)?f(null===(a=r.data.data)||void 0===a?void 0:a.autoCompleteCategory.items):f([]),(null===(t=r.data.data)||void 0===t?void 0:t.autoCompleteKeyword.items)?v(r.data.data.autoCompleteKeyword.items):v([])}catch(e){f([]),v([])}finally{j(!1)}})()},[w,i]);let N=e=>{g(!1),p(!1),o&&o(!1),d.push(e)};return(0,r.jsx)(r.Fragment,{children:_.length>0?(0,r.jsxs)("ul",{className:"search_result_list",children:[_.map((e,t)=>(0,r.jsx)("li",{className:"item_comm",children:(0,r.jsxs)(x.default,{href:"#",className:"recent_list_item px_4",onClick:t=>{t.preventDefault(),l(t,e.keyword)},children:[(0,r.jsx)(O.Z,{name:"Search",width:12,height:12,fill:"#858B94",className:"recent_list_search_icon"}),(0,r.jsx)("span",{className:"recent_keyword_txt flex_1",dangerouslySetInnerHTML:{__html:e.highlight}}),(0,r.jsx)(O.Z,{name:"UpperLeftArrow",width:16,height:16,fill:"#858B94",className:"ml_auto"})]})},t)),null==y?void 0:y.map(e=>(0,r.jsx)("li",{children:(0,r.jsxs)(x.default,{href:"#",className:"recent_list_item px_4",onClick:t=>{t.preventDefault(),N("/fo/product/productListPage.do?displayCategorySeq=".concat(e.categorySeq,"&sellUnitType=").concat(C)),a(!1)},children:[(0,r.jsx)(O.Z,{name:"GridCircle",width:12,height:12,fill:"#858B94",className:"recent_list_search_icon"}),(0,r.jsxs)("p",{className:"flex_items_center flex_1 gap_2",children:[(0,r.jsx)("span",{className:"recent_keyword_txt",children:e.keyword}),(0,r.jsx)("i",{className:"category_ico ml_auto",children:(0,r.jsx)("em",{className:"txt_box",children:"카테고리"})})]}),(0,r.jsx)(O.Z,{name:"UpperLeftArrow",width:16,height:16,fill:"#858B94",className:"ml_auto"})]})},e.categorySeq))]}):(0,r.jsx)("p",{className:"empty_result_box",children:"일치하는 검색어가 없습니다"})})},z=e=>{let{setIsSearch:t,isSearch:a,isActive:i,setIsActive:c}=e,{setSearchActive:d,setSearchState:h}=(0,u.w)(),[m,g]=(0,n.useState)(!0),[x,p]=(0,n.useState)(""),[y,_]=(0,n.useState)("init"),v=(0,n.useRef)(null),w=(0,n.useRef)(null),b=(0,o.ZP)(),S=(0,s.useSearchParams)().get("searchText"),j=(0,n.useRef)(null);(0,L.O)(j,()=>{m&&g(!1)}),(0,n.useEffect)(()=>{"undefined"!=typeof document&&a&&w.current&&setTimeout(()=>{var e;null===(e=w.current)||void 0===e||e.focus(),g(!0)},300)},[a]);let C=async()=>{g(!0)};(0,n.useEffect)(()=>{p(S||"")},[S]);let N=(0,n.useCallback)((e,a)=>{let r=a?a.trim():x.trim();if(""===r){alert("검색어를 입력해주세요."),w.current&&w.current.focus();return}null==e||e.preventDefault();let s=Z.n.getSearchResultPageDoURL({fomo:"fo",searchKeyword:r});null==t||t(!1),h(!1),d(!1),b.push(s),g(!1),null==c||c(0)},[x]);return(0,r.jsxs)("div",{className:"header_search_wrap ".concat(m?"on_focus":""),ref:j,children:[(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),N(e)},style:{display:"flex",width:"100%"},children:[(0,r.jsx)("input",{type:"search",onChange:e=>{p(e.target.value)},onFocus:C,onKeyDown:e=>{("Enter"===e.code||"Enter"===e.key)&&(e.preventDefault(),N(e))},value:x,className:"input_header_search",placeholder:"상품명 혹은 브랜드 입력",maxLength:20,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",name:"search","aria-haspopup":"listbox","aria-controls":"search-layer",ref:w,autoFocus:!!a}),(0,r.jsx)(l.Z,{icon:{name:"ChevronLeft",w:20,h:20,f:"#232221"},style:"m_button_before_search",text:"닫기",textStyle:"sr-only",handleClick:()=>{null==t||t(!1),h(!1),d(!1)}}),x&&x.length&&(0,r.jsx)(f.Z,{icon:{name:"Close",w:12,h:12,f:"#fff"},outLineStyle:"keyword_remove_wrap",style:"button_keyword_remove",handleClick:()=>{p(""),_("init")}}),(0,r.jsx)(f.Z,{icon:{name:"Search",w:20,h:20,f:"#DB0E64"},outLineStyle:"button_header_search",style:"button_search",handleClick:N})]}),(0,r.jsx)("div",{className:"search_layer_wrap",id:"search-layer",role:"listbox",children:(0,r.jsxs)("div",{className:"top_inner",children:[m&&!x&&a&&(0,r.jsx)(Q,{setIsFocused:g,goSearch:N,searchValue:x,abortControllerRef:v,setIsSearch:t}),m&&x&&a&&(0,r.jsx)(H,{setIsFocused:g,goSearch:N,searchValue:x,abortControllerRef:v,setIsSearch:t})]})})]})},U=()=>{let e=(0,c.Xt)();(0,s.useRouter)();let t=(0,s.usePathname)(),{setSearchState:a,setSearchActive:h,setCategoryState:m,setCategoryActive:g}=(0,u.w)(),x=(0,c.B_)(e=>e.uiSlice.deviceType),p=(0,c.B_)(e=>e.authSlice.isLogin),y=(0,c.B_)(e=>e.uiSlice.isSearch),f=(0,c.B_)(e=>e.uiSlice.searchActive),_=(0,c.B_)(e=>e.uiSlice.isCategory),v=(0,c.B_)(e=>e.uiSlice.categoryActive),[w,b]=(0,n.useState)(f?1:v?2:0),[S,j]=(0,n.useState)(y),[C,N]=(0,n.useState)(_),{moveMyOrderListPage:E}=(0,o.ZP)(),I=()=>"/"===t||"/fo/main"===t||"/mo/main"===t,k=p?d.slice(0,5):[...d.slice(0,4),d[5]];(0,n.useEffect)(()=>{try{let t=sessionStorage.getItem("restoreBottomNavActive");if(null!==t){let r=Number(t);1===r?(b(1),j(!0),a(!0),h(!0),N(!1),m(!1),g(!1)):2===r?(e((0,T.Q9)()),b(2),N(!0),m(!0),g(!0),j(!1),a(!1),h(!1)):b(0),sessionStorage.removeItem("restoreBottomNavActive");return}}catch(e){}j(y),N(_),f?b(1):v?b(2):f||v||b(0)},[y,f,_,v]);let L=t=>{switch(b(t),t){case 0:i.Z.goHome();break;case 1:y?(j(!1),a(!1),h(!1)):(_&&(N(!1),m(!1),g(!1)),j(!0),a(!0),h(!0));break;case 2:if(_){try{sessionStorage.setItem("categoryCloseReason","user")}catch(e){}N(!1),m(!1),g(!1)}else y&&(j(!1),a(!1),h(!1)),e((0,T.Q9)()),N(!0),m(!0),g(!0);break;case 3:E();break;case 4:i.Z.goMyPage()}};return(0,n.useEffect)(()=>{C&&2===w||S&&1===w?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll")},[C,S,w]),(0,n.useEffect)(()=>{let e=()=>{};return document.addEventListener("touchstart",e,{passive:!0}),()=>document.removeEventListener("touchstart",e)},[]),(0,n.useEffect)(()=>{let e="no-scroll-style";if(!document.getElementById(e)){let t=document.createElement("style");t.id=e,t.innerHTML="\n        body.no-scroll {\n          position: fixed;\n          width: 100%;\n          overflow-y: scroll;\n        }\n      ",document.head.appendChild(t)}},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("nav",{className:"mobile_navigation",children:(0,r.jsx)("ul",{className:"item_list",children:k.map((e,t)=>(0,r.jsx)("li",{children:(0,r.jsx)(l.Z,{icon:{name:w===t&&"Person"!==e.icon.n&&(0!==t||I())?"".concat(e.icon.n,"Fill"):e.icon.n,w:e.icon.w,h:e.icon.h,f:e.icon.f},text:e.txt,textStyle:"mobile_nav_txt",handleClick:()=>L(t),style:"button_mobile_nav ".concat(w===t&&(0!==t||I())?"active-nav":"")})},"".concat(e.txt,"-").concat(t)))})}),(0,r.jsx)("div",{className:"mobile_fixed mobile_search_wrap ".concat(S&&1===w?"open":""),children:(0,r.jsx)(z,{setIsSearch:j,isSearch:S,isActive:w,setIsActive:b})}),(0,r.jsx)("div",{className:"mobile_fixed mobile_category_wrap ".concat(C&&2===w?"open":""),children:(0,r.jsx)(B,{setIsCategory:N,isCategory:C,deviceType:x,withBanner:!1,setCategoryState:m,setCategoryActive:g})})]})}},74163:function(e,t,a){a.d(t,{j:function(){return u},$:function(){return c}});var r=a(14953);let s=(0,a(70635).Hx)();class n{getList(e){return s.get("".concat("/product/api/v1/events/searchDisplayTitle"),{signal:e})}}let l=new n;var i=a(1455);let o="displayTitleList",c=(0,i.hg)("".concat(o,"/load"),async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{signal:t}=e;return(await l.getList(t)).data}),u=(0,r.O9)(o,{status:"pending"},c)},42247:function(e,t,a){a.d(t,{QJ:function(){return i},Zh:function(){return o},Zz:function(){return l}});var r=a(14953),s=a(31440),n=a(1455);let l=(0,n.oM)({name:"searchWord",initialState:(0,r.ic)(),reducers:{},extraReducers:e=>{e.addCase(i.fulfilled,(e,t)=>({...t.payload,status:"loaded"})).addCase(i.pending,(e,t)=>{e.status="pending"}).addCase(i.rejected,(e,t)=>{e.status="error"}).addCase(o.fulfilled,(e,t)=>({...t.payload,status:"loaded"})).addCase(o.pending,(e,t)=>{e.status="pending"}).addCase(o.rejected,(e,t)=>{e.status="error"})}}),i=(0,n.hg)("".concat(l.name,"/add"),async e=>(await s.Z.add(e)).data),o=(0,n.hg)("".concat(l.name,"/remove"),async e=>(await s.Z.delete(e)).data);(0,r.TK)({slice:l,thunkActions:{addSearchWord:i,removeSearchWord:o}})}}]);
//# sourceMappingURL=1732-f633fbd17f1e5820.js.map